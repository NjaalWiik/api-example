// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  email String @unique
  hash  String

  firstName String?
  lastName  String?

  @@map("users")
}

model Product {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  url        String @unique
  pricespyId Int

  @@map("products")
}

model Shop {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  pricespyId         Int?    @unique
  name               String
  companyName        String?
  rootDomain         String? @unique
  logo176            String?
  logo88             String?
  externalUri        String?
  information        String?
  countryCode        String?
  market             String?
  currency           String?
  storeLocationCount Int?

  Offers Offer[]
  @@map("shops")
}

model Offer {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  rootDomain       String
  type             String
  coupon           String?
  name             String?
  page             String?
  terms            String?
  trackinUrl       String?
  validTo          DateTime?
  validFrom        DateTime?
  amount           String
  verifiedCoupon   Boolean?
  status           String?
  feedbackPositive Int?
  feedbackNegative Int?
  clicked          Int?

  shop Shop @relation(fields: [rootDomain], references: [rootDomain], onDelete: Cascade)

  @@map("offers")
}
